---
title: Latency Settings
description: Learn how to configure latency settings in Moonbeam for responsive gameplay
sidebar:
  order: 4
---

import { Steps, Badge } from '@astrojs/starlight/components';

Latency, or input lag, is a crucial factor in game streaming that affects how responsive your controls feel. Moonbeam provides options to manage latency expectations given your network conditions. Moonbeam doesn't directly control latency, but it can measure and respond to it before initiating a moonlight stream. 

## Setting Maximum Latency

Use the `--max-latency` option to set the maximum acceptable latency in milliseconds:

```bash
moonbeam --max-latency 50 stream MyHost "My Game"
```

If the measured latency exceeds this threshold, Moonbeam will warn you and abort the connection. In such cases, you may want to try finding a better network connection or optimizing your current network setup before attempting to stream again.

:::note
If you don't specify a `--max-latency` value, Moonbeam will not enforce a latency limit but will still attempt to minimize FPS within the constraints of your other settings.
:::

## How Moonbeam Responds to Current Latency

1. Moonbeam measures the current network latency to your host.
2. If the measured latency exceeds your set max latency, Moonbeam will warn you and may abort the stream.

## Best Practices

3. **Game-Specific Tuning**: Adjust based on expectations of the type of game:
   - For fast-paced, competitive games (e.g., FPS, fighting games), set a lower max latency.
   - For slower-paced games (e.g., strategy, RPGs), you can likely tolerate higher latency.

3. **Network Considerations**: Your network quality significantly impacts latency. Consider these factors:
   - Physical distance to the host
   - Network congestion
   - Wi-Fi vs. Ethernet connection


## Testing Different Latency Scenarios

To simulate different network conditions, you can use the `tc` (traffic control) tool on Linux. This allows you to artificially introduce latency and test how your games and applications perform under various conditions.

<Steps>

1. Start by adding a 200ms delay to your network interface (replace `<WIFI>` with your actual interface name):
   ```bash
   sudo tc qdisc add dev <WIFI> root netem delay 200ms 
   ```

2. Launch (and play) your game with Moonbeam and observe the performance:
   ```bash
   moonbeam --max-latency 200 stream MyHost "My Game"
   ```

3. Gradually decrease the latency to test lower latency scenarios:
   ```bash
   sudo tc qdisc change dev <WIFI> root netem delay 100ms
   ```

5. When you're done testing, remove the artificial delay:
   ```bash
   sudo tc qdisc del dev <WIFI> root
   ```

</Steps>

:::caution
Remember to remove the artificial delay after testing to restore your normal network performance.
:::

:::tip
By starting with a high latency and gradually decreasing it, you can find the highest latency at which each game remains playable. This can help you determine which games are suitable for different network conditions.
:::

## Advanced Latency Optimization

Here are some additional steps you can take to minimize latency:

1. **Use a Wired Connection**: Whenever possible, use Ethernet instead of Wi-Fi on both the host and client devices.

2. **Optimize Your Network**: Ensure your router is configured for gaming, with QoS (Quality of Service) settings prioritizing your gaming devices if available.

3. **Close Bandwidth-Heavy Applications**: On both host and client, close applications that might be using significant bandwidth (e.g., file synchronization services, video streaming).

4. **Consider Host Hardware**: On the host PC, using a hardware encoder (like NVENC on NVIDIA GPUs) can help reduce encoding latency.

## Game Selection for High-Latency Environments

<Badge text="High Latency" variant="caution"/> In some cases, you might encounter network conditions that result in unavoidably high latency (300ms or more). In these situations, some games are more forgiving and can still provide an enjoyable experience despite the higher latency. These games typically don't require split-second reactions or precise timing, allowing you to play comfortably even with noticeable input lag.

### Games Suitable for High-Latency Environments

Here's a list of game types that remain enjoyable even with significant input lag:

1. **Turn-based Strategy Games** (e.g., Civilization VI, XCOM 2)
2. **Puzzle Games** (e.g., Baba Is You, The Witness)
3. **Visual Novels** (e.g., Ace Attorney series, Danganronpa series)
4. **Point-and-Click Adventure Games** (e.g., Monkey Island series, Grim Fandango)
5. **Card Games** (e.g., Hearthstone, Slay the Spire)
6. **Turn-based RPGs** (e.g., Divinity: Original Sin 2, Baldur's Gate 3)
7. **City-building and Management Games** (e.g., Cities: Skylines, RimWorld)
8. **Interactive Storytelling Games** (e.g., Life is Strange, Telltale games)
9. **Tactical RPGs** (e.g., Final Fantasy Tactics, Disgaea series)
10. **Slow-paced Simulation Games** (e.g., Stardew Valley, Euro Truck Simulator 2)

These games work well in high-latency environments because they don't require quick reflexes or precise timing, allowing you to enjoy the gameplay despite the input delay.

:::tip
Experiment with different settings to find the best balance between image quality and responsiveness for your specific network conditions and game choice.
:::
