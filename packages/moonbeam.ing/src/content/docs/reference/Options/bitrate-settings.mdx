---
title: Bitrate Settings
description: Learn how to configure bitrate settings in Moonbeam for optimal streaming quality and performance
sidebar:
  order: 3
---

import { Steps } from '@astrojs/starlight/components';

Bitrate is a critical factor in determining the quality of your game stream. It represents the amount of data transmitted per second. Moonbeam provides options to configure bitrate settings, allowing you to balance between visual quality and network performance.

## Setting Bitrate

In Moonbeam, you can set the maximum bitrate for your stream using the `--max-bitrate` option:

```bash
moonbeam --max-bitrate 20000 stream MyHost "My Game"
```

This allows Moonbeam to use up to 20 Mbps for the stream, adjusting lower if network conditions require it.

:::note
The `--bitrate` option is an alias for `--max-bitrate`. Both options function identically.
:::

:::note
Bitrate values are specified in Kbps (kilobits per second). So 20000 represents 20 Mbps.
:::

## Automatic Bitrate Calculation

If you don't specify a max bitrate, Moonbeam will automatically calculate an appropriate bitrate based on the resolution and FPS settings. This calculation takes into account:

1. The maximum resolution you've set (or your display's native resolution if not specified)
2. The maximum FPS you've set (or your display's refresh rate if not specified)
3. Your current network conditions

:::tip
For most users, allowing Moonbeam to automatically calculate the bitrate will provide the best balance of quality and performance.
:::

## Benchmarking Different Bitrate Scenarios

To find the optimal bitrate settings for your games and network conditions, you can simulate different network speeds using the `tc` (traffic control) tool on Linux. This allows you to test how your game streaming performs under various bandwidth limitations.

<Steps>

1. Start by limiting your network bandwidth to 2 Mbps (replace `<WIFI>` with your actual interface name):
   ```bash
   sudo tc qdisc add dev <WIFI> root tbf rate 2mbit latency 1ms burst 32k
   ```

2. Launch your game with Moonbeam and observe the streaming quality:
   ```bash
   moonbeam --max-bitrate 2000 stream MyHost "My Game"
   ```

3. Gradually increase the bandwidth limit to test higher bitrate scenarios:
   ```bash
   sudo tc qdisc change dev <WIFI> root tbf rate 5mbit latency 1ms burst 32k
   ```

4. Test your games at different bandwidth levels (e.g., 2 Mbps, 5 Mbps, 10 Mbps) to understand how they perform:
   ```bash
   moonbeam --max-bitrate 5000 stream MyHost "My Game"
   ```
   ```bash
   sudo tc qdisc change dev <WIFI> root tbf rate 10mbit latency 1ms burst 32k
   moonbeam --max-bitrate 10000 stream MyHost "My Game"
   ```

5. When you're done testing, remove the bandwidth limitation:
   ```bash
   sudo tc qdisc del dev <WIFI> root
   ```

</Steps>

:::caution
Remember to remove the bandwidth limitation after testing to restore your normal network performance.
:::

:::tip
By starting with a low bandwidth and gradually increasing it, you can find the lowest bitrate at which each game remains playable with acceptable quality. This helps in optimizing your streaming settings for different network conditions.
:::

## Best Practices

1. **Network Speed**: Set your max bitrate to no more than 70-80% of your upload speed (on the host) and download speed (on the client) to leave headroom for other network traffic and to account for fluctuations.

2. **Resolution and FPS Considerations**: Higher resolutions and frame rates require higher bitrates. As a rough guide:
   - 1080p60: 10-20 Mbps
   - 1440p60: 20-40 Mbps
   - 4K60: 40-80 Mbps

3. **Game Type Considerations**: 
   - Fast-paced games with lots of motion (e.g., FPS, racing) benefit from higher bitrates.
   - Slower-paced games (e.g., strategy, RPGs) can often look good at lower bitrates.

4. **Visual Quality vs. Latency**: Higher bitrates generally provide better visual quality but can increase latency. Find a balance that works for your game and network.

:::caution
Setting a bitrate that's too high for your network can result in increased latency, frame drops, or connection instability. Always ensure your network can handle the bitrate you set.
:::

Remember that the ideal settings may vary depending on your specific network conditions, the game you're playing, and your personal preferences. Don't hesitate to experiment to find the perfect configuration for your setup.
